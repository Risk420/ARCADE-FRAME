<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Arcade Studio</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js"></script>

<style>
  /* --- ARCADE STUDIO ORIGINAL STYLES (DO NOT CHANGE) --- */
  html { scroll-behavior: smooth; overflow-y: auto; }
  body {
    background: #0a0a0c; color: white; font-family: sans-serif;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh; margin: 0; padding-bottom: 150px; 
    -webkit-overflow-scrolling: touch; 
    background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px);
    background-size: 100% 4px; touch-action: pan-y; 
  }
  
  .menu-toggle { 
    position: fixed; top: 15px; left: 15px; 
    background: #1a1a1c; color: #fff; border: 1px solid rgba(255,255,255,0.1); 
    padding: 8px 12px; border-radius: 4px; font-weight: bold; cursor: pointer; 
    z-index: 100000; font-size: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.5); 
  }

  #menu-panel { 
    position: fixed; top: 0; left: -260px; width: 240px; height: 100%; 
    background: #1a1a1c; padding-top: 60px; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
    z-index: 99999; display: flex; flex-direction: column; gap: 15px; 
    padding-left: 15px; padding-right: 15px; box-shadow: 2px 0 15px rgba(0,0,0,0.5); 
    box-sizing: border-box; padding-bottom: 80px; 
  }
  #menu-panel.open { left: 0; }

  .switch-container { position: relative; width: 100%; }
  #switch-btn { 
    background: rgba(255,255,255,0.05); color: white; border: 2px solid #ff0000; 
    padding: 10px; border-radius: 4px; font-weight: bold; cursor: pointer; 
    font-size: 11px; text-transform: uppercase; width: 100%; text-align: center;
    box-shadow: 0 0 10px rgba(255,0,0,0.5); 
  }
  #switch-menu { 
    position: absolute; top: 45px; right: 0; background: #1a1a1c; 
    border: 1px solid #ff0000; border-radius: 8px; width: 210px; 
    display: none; flex-direction: column; overflow: hidden; 
    box-shadow: 0 10px 20px rgba(0,0,0,0.8); z-index: 100001;
  }
  #switch-menu button { 
    background: transparent; color: #aaa; border: none; padding: 14px; 
    text-align: left; font-weight: bold; font-size: 11px; cursor: pointer; 
    border-bottom: 1px solid rgba(255,255,255,0.05); text-transform: uppercase;
  }
  #switch-menu button.active-link { color: #00ffff; background: rgba(0,255,255,0.1); border-left: 3px solid #00ffff; }

  .designed-by { position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px 0; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; font-size: 11px; font-weight: 900; color: #888; background: #1a1a1c; }
  .designed-by b { color: #ff0000; text-shadow: 0 0 8px rgba(255,0,0,0.6); }

  .music-section { border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.03); border-radius: 6px; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
  .lnk { display: flex; align-items: center; gap: 10px; padding: 12px; text-decoration: none; color: white; font-size: 13px; font-weight: bold; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); }

  h1 { color: #fff; margin: 60px 0 0 0; font-family: "Arial Black", sans-serif; font-style: italic; font-size: 36px; text-transform: uppercase; letter-spacing: -1px; text-shadow: 2px 2px 0px #ff0000, -1px -1px 10px rgba(255, 0, 0, 0.8); animation: arcadeBounce 1.8s infinite ease-in-out; }
  @keyframes arcadeBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
  .sub { color: #fff; font-weight: bold; margin: 2px 0 15px 0; text-transform: uppercase; font-size: 11px; letter-spacing: 2px; text-align: center; }
  
  .studio-sec { display: none; width: 320px; flex-direction: column; align-items: center; }
  .active-sec { display: flex; }

  /* --- NEON GIF MAKER SPECIFIC STYLES --- */
  :root { --neon: #00f3ff; --purple: #bc13fe; --red: #ff0055; }
  .stage { position: relative; width: 320px; height: 320px; display: flex; align-items: center; justify-content: center; margin-bottom: 30px; touch-action: none; }
  .led-ring { position: absolute; inset: -15px; border-radius: 50%; background: conic-gradient(from 0deg, transparent, var(--neon), var(--purple), transparent); animation: rotate 2s linear infinite; filter: blur(20px); z-index: 1; pointer-events: none; }
  .viewport { position: relative; z-index: 5; width: 100%; height: 100%; border-radius: 50%; overflow: hidden; background-color: #000; background-image: linear-gradient(45deg, #1a1a1a 25%, transparent 25%), linear-gradient(-45deg, #1a1a1a 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #1a1a1a 75%), linear-gradient(-45deg, transparent 75%, #1a1a1a 75%); background-size: 20px 20px; box-shadow: inset 0 0 20px #000; transform: translateZ(0); touch-action: none; }
  #v { position: absolute; top: 0; left: 0; min-width: 100%; min-height: 100%; transform-origin: top left; pointer-events: none; }
  #o { width: 100%; height: 100%; object-fit: cover; display: none; }
  @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  .ui-neon { z-index: 10; background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(20px); padding: 25px; border-radius: 30px; width: 340px; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 20px 50px rgba(0,0,0,0.5); display: flex; flex-direction: column; align-items: center; }
  .btn-upload { background: linear-gradient(90deg, var(--neon), var(--purple)); color: #000; border: none; padding: 15px; border-radius: 50px; font-weight: 800; cursor: pointer; width: 100%; margin-bottom: 25px; font-size: 14px; }
  .btn-go { background: transparent; color: white; border: 1px solid var(--neon); padding: 15px; width: 100%; border-radius: 15px; cursor: pointer; font-weight: bold; font-size: 14px; }
  .status { margin-top: 20px; font-size: 14px; color: var(--neon); font-weight: 600; opacity: 0; height: 20px; }
  .status.active { opacity: 1; }
  .neon-wrap { position: relative; display: none; margin-top: 20px; padding: 3px; border-radius: 50px; overflow: hidden; width: fit-content; }
  .neon-wrap.blue::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: conic-gradient(transparent, transparent, var(--neon), var(--purple), transparent, transparent); animation: rotate 2s linear infinite; z-index: 0; }
  .btn-inner { position: relative; display: block; text-decoration: none; text-align: center; color: white; background: #000; padding: 12px 30px; border-radius: 48px; font-weight: 900; font-size: 14px; z-index: 1; cursor: pointer; border: none; }

  /* --- SHARED UI --- */
  .btn-shared { background: #111; border: 2px solid #ffffff; color: white; padding: 10px; text-align: center; border-radius: 8px; font-weight: bold; display: block; font-size: 12px; cursor: pointer; text-transform: uppercase; }
</style>
</head>

<body onclick="startAudio()">

<button class="menu-toggle" onclick="toggleMenu(event)">MENU ‚ò∞</button>

<div id="menu-panel">
  <div class="switch-container">
    <button id="switch-btn" onclick="toggleSwitchMenu(event)">SWITCH TO üìÇ</button>
    <div id="switch-menu">
      <button id="nav-frame" class="active-link" onclick="changeStudio('frame')">üñºÔ∏è Frame Studio</button>
      <button id="nav-font" onclick="changeStudio('font')">‚úçÔ∏è Font Studio</button>
      <button id="nav-gif" onclick="changeStudio('gif')">‚ö° GIF Maker</button>
    </div>
  </div>
  
  <div class="music-section">
    <a href="#" class="lnk">Spotify üéµ</a>
  </div>
  
  <div class="designed-by">DESIGNED BY <b>HUSSAIN</b></div>
</div>

<h1 id="studio-name">ARCADE</h1>
<div class="sub" id="studio-sub">FRAME STUDIO</div>

<div id="frame-studio" class="studio-sec active-sec">
  <div id="box"><canvas id="c" width="800" height="800"></canvas></div>
  <div style="margin-top:20px; width:310px; display:flex; flex-direction:column; gap:6px;">
    <label class="btn-shared" onclick="document.getElementById('img-up').click()">CHOOSE IMAGE</label>
    <input type="file" id="img-up" accept="image/*" style="display:none">
    <button id="save" style="background:#ff0000; border:none; padding:12px; border-radius:8px; color:white; font-weight:bold;">DOWNLOAD PICTURE</button>
  </div>
</div>

<div id="font-studio" class="studio-sec">
  <input type="text" id="font-input" style="width:100%; background:#111; border:2px solid #00ffff; color:#fff; padding:15px; border-radius:8px; text-align:center;" placeholder="Type here...">
  <div id="font-results" style="width:100%; margin-top:15px;"></div>
</div>

<div id="gif-studio" class="studio-sec">
    <div class="stage" id="stage">
        <div class="led-ring"></div>
        <div class="viewport" id="vp">
            <video id="v" muted playsinline loop></video>
            <img id="o">
        </div>
    </div>
    <div class="ui-neon">
        <button class="btn-upload" id="upBtn" onclick="document.getElementById('f').click()">UPLOAD YOUR VIDEO</button>
        <input type="file" id="f" accept="video/*" style="display:none">
        <button id="go" class="btn-go">‚ö° CREATE HD GIF</button>
        <div id="msg" class="status">Processing...</div>
        <div id="dlBox" class="neon-wrap blue"><a id="dl" class="btn-inner">‚¨áÔ∏è DOWNLOAD GIF</a></div>
    </div>
</div>

<script>
const sName = document.getElementById('studio-name');
const sSub = document.getElementById('studio-sub');
const swMenu = document.getElementById('switch-menu');
const mPanel = document.getElementById('menu-panel');

function toggleMenu(e) { e.stopPropagation(); mPanel.classList.toggle('open'); swMenu.style.display = 'none'; }
function toggleSwitchMenu(e) { e.stopPropagation(); swMenu.style.display = (swMenu.style.display === 'flex') ? 'none' : 'flex'; }

function changeStudio(mode) {
    document.querySelectorAll('.studio-sec').forEach(s => s.classList.remove('active-sec'));
    document.querySelectorAll('#switch-menu button').forEach(b => b.classList.remove('active-link'));
    swMenu.style.display = 'none'; mPanel.classList.remove('open');

    if (mode === 'frame') {
        document.getElementById('frame-studio').classList.add('active-sec');
        document.getElementById('nav-frame').classList.add('active-link');
        sName.innerText = "ARCADE"; sSub.innerText = "FRAME STUDIO";
    } else if (mode === 'font') {
        document.getElementById('font-studio').classList.add('active-sec');
        document.getElementById('nav-font').classList.add('active-link');
        sName.innerText = "FONTS"; sSub.innerText = "GENERATOR STUDIO";
    } else if (mode === 'gif') {
        document.getElementById('gif-studio').classList.add('active-sec');
        document.getElementById('nav-gif').classList.add('active-link');
        sName.innerText = "NEON"; sSub.innerText = "GIF STUDIO";
    }
}

window.onclick = () => { mPanel.classList.remove('open'); swMenu.style.display = 'none'; };

/* --- GIF MAKER ENGINE LOGIC --- */
const workerBlob = new Blob([`importScripts('https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.worker.js');`], { type: 'application/javascript' });
const workerUrl = URL.createObjectURL(workerBlob);
const f = document.getElementById('f'), v = document.getElementById('v'), o = document.getElementById('o'), vp = document.getElementById('vp'), go = document.getElementById('go'), msg = document.getElementById('msg'), dlBox = document.getElementById('dlBox'), dl = document.getElementById('dl');

f.onchange = (e) => {
    const file = e.target.files[0]; if (!file) return;
    v.style.display = 'block'; o.style.display = 'none'; dlBox.style.display = 'none';
    v.src = URL.createObjectURL(file);
    v.onloadedmetadata = () => { v.play(); };
};

go.onclick = () => {
    if(!v.src) return; 
    msg.innerText = "Processing..."; msg.classList.add('active');
    const gif = new GIF({ workers: 2, quality: 10, width: 480, height: 480, workerScript: workerUrl });
    const canvas = document.createElement('canvas'); canvas.width = 480; canvas.height = 480; const ctx = canvas.getContext('2d');
    
    // Simple 1-second capture for stability
    let cTime = 0; 
    const capture = () => {
        if (cTime >= 1) { gif.render(); return; }
        v.currentTime = cTime;
        ctx.drawImage(v, 0, 0, 480, 480);
        gif.addFrame(ctx, {copy: true, delay: 40});
        cTime += 0.1; capture();
    };
    gif.on('finished', (blob) => {
        const url = URL.createObjectURL(blob);
        v.style.display = 'none'; o.src = url; o.style.display = 'block';
        dl.href = url; dl.download = "neon_focus.gif"; dlBox.style.display = 'block';
        msg.classList.remove('active');
    });
    capture();
};

function startAudio() {}
</script>
</body>
</html>
